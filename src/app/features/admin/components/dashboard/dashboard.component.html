<div class="dashboard-container">
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>

      <!-- â•â•â• HEADER â•â•â• -->
      <header class="dash-header">
        <div class="greeting">
          <h1>HolağŸ‘‘</h1>
          <p class="subtitle">AsÃ­ van las cosas en Regi Bazarâœ¨</p>
        </div>
        <div class="date-badge">
          ğŸ“… {{ today | date:'EEEE d MMMM' }}
        </div>
      </header>

      @if (loading()) {
        <div class="loading-state">
          <div class="spinner">ğŸ€</div>
          <p>Cargando tus Ã©xitos...</p>
        </div>
      } @else {
        @if (data(); as d) {

          <!-- â•â•â• KPIs PRINCIPALES â•â•â• -->
          <div class="kpi-row fade-in">
            <div class="kpi-card">
              <span class="kpi-icon">ğŸ’°</span>
              <div class="kpi-data">
                <span class="kpi-label">Ventas Hoy</span>
                <span class="kpi-value">{{ metrics().salesToday | currency:'MXN':'symbol-narrow':'1.0-0' }}</span>
              </div>
            </div>
            <div class="kpi-card">
              <span class="kpi-icon">ğŸ“Š</span>
              <div class="kpi-data">
                <span class="kpi-label">Esta Semana</span>
                <span class="kpi-value">{{ metrics().salesWeek | currency:'MXN':'symbol-narrow':'1.0-0' }}</span>
              </div>
            </div>
            <div class="kpi-card">
              <span class="kpi-icon">ğŸ“ˆ</span>
              <div class="kpi-data">
                <span class="kpi-label">Este Mes</span>
                <span class="kpi-value">{{ metrics().salesMonth | currency:'MXN':'symbol-narrow':'1.0-0' }}</span>
              </div>
            </div>
            <div class="kpi-card highlight">
              <span class="kpi-icon">âš ï¸</span>
              <div class="kpi-data">
                <span class="kpi-label">Por Cobrar</span>
                <span class="kpi-value text-red">{{ metrics().pendingCollection | currency:'MXN':'symbol-narrow':'1.0-0' }}</span>
              </div>
            </div>
          </div>

          <!-- â•â•â• STATS GRID â•â•â• -->
          <div class="stats-grid">

            <div class="stat-card revenue-card">
              <div class="card-content">
                <div class="card-icon">ğŸ’¸</div>
                <div class="card-data">
                  <span class="label">Ingresos Totales</span>
                  <span class="value">$ {{ d.totalRevenue | number:'1.0-0' }}</span>
                </div>
              </div>
              <div class="sparkles">âœ¨</div>
            </div>

            <div class="stat-card pink-glass">
              <div class="stat-header">
                <span class="emoji">ğŸ’°</span>
                <span class="trend">Total Invertido</span>
              </div>
              <span class="stat-number">$ {{ d.totalInvestment | number:'1.0-0' }}</span>
            </div>

            <div class="stat-card pink-glass">
              <div class="stat-header">
                <span class="emoji">ğŸ’â€â™€ï¸</span>
                <span class="trend">Clientas</span>
              </div>
              <span class="stat-number">{{ d.totalClients }}</span>
            </div>

            <div class="stat-card purple-glass">
              <div class="stat-header">
                <span class="emoji">ğŸ›ï¸</span>
                <span class="trend">Pedidos</span>
              </div>
              <span class="stat-number">{{ d.totalOrders }}</span>
            </div>

            <div class="stat-card peach-glass">
              <div class="stat-header">
                <span class="emoji">â³</span>
                <span class="trend">Pendientes</span>
              </div>
              <span class="stat-number">{{ d.pendingOrders }}</span>
            </div>

            <div class="stat-card mint-glass">
              <div class="stat-header">
                <span class="emoji">ğŸ’</span>
                <span class="trend">Entregados</span>
              </div>
              <div>
                <span class="stat-number">{{ d.deliveredOrders }}</span>
                <span class="sub-stat">({{ metrics().successRate }}%)</span>
              </div>
            </div>

            <div class="stat-card blue-glass">
              <div class="stat-header">
                <span class="emoji">ğŸš—</span>
                <span class="trend">Rutas</span>
              </div>
              <span class="stat-number">{{ d.activeRoutes }}</span>
            </div>

          </div>

          <!-- â•â•â• CHARTS â•â•â• -->
          <div class="charts-grid">
            <div class="chart-card wide">
              <h3>ğŸ“ˆ Ventas vs InversiÃ³n</h3>
              <div echarts [options]="salesVsInvOptions" class="chart-container"></div>
            </div>

            <div class="chart-card">
              <h3>ğŸ€ Tipos de Clientas</h3>
              <div echarts [options]="clientTypeOptions" class="chart-container"></div>
            </div>

            <div class="chart-card">
              <h3>ğŸšš EnvÃ­os vs PickUp</h3>
              <div echarts [options]="deliveryMethodOptions" class="chart-container"></div>
            </div>
          </div>

        }
      }
    </div>